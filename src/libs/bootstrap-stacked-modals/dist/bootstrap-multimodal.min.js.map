{"version":3,"sources":["multimodal.js"],"names":["BootstrapMultimodal","$","adjustBackdrops","modalIndex","modalsCount","$firstBackdrop","not","addClass","css","BASE_ZINDEX","ZINDEX_MULTIPLIER","adjustModal","$modal","ZINDEX_MODAL","patchModalHide","modal","__isHidePatched","hide","event","wasShown","isShown","apply","arguments","this","bind","patchModalAdjustDialog","__isAdjustDialogPatched","firstModal","$firstModal","data","bodyIsOverflowing","scrollbarWidth","adjustDialog","modalIsOverflowing","$element","scrollHeight","document","documentElement","clientHeight","paddingLeft","paddingRight","patchModalBackdrop","__isBackdropPatched","backdrop","patchModalSetScrollbar","$navbars","NAVBAR_SELECTOR","setScrollbar","$body","resetScrollbar","patchModal","onShow","isDefaultPrevented","target","enable","on","disable","off","jQuery"],"mappings":";;;;;;;;;;;;;;;AAeAA,oBAAA,SAAAC,GAaA,SAAAC,IACA,IAAAC,EAAAC,EAAA,EACAC,EAAAJ,EAAA,yBAEAA,EAAA,mBAAAK,IAAA,UAAAC,SAAA,UAEA,GAAAJ,EACAE,EAAAG,IAAA,UAAA,IAEAH,EAAAG,IAAA,UAAAC,EAAAN,EAAAO,GASA,SAAAC,EAAAC,GACA,IAAAT,EAAAC,EAAA,EAEAQ,EAAAJ,IAAA,UAAAC,EAAAN,EAAAO,EAAAG,GAQA,SAAAC,EAAAC,GACA,IAAA,IAAAA,EAAAC,gBAAA,CAGAD,EAAAC,iBAAA,EAEA,IAAAC,EAAAF,EAAAE,KAEAF,EAAAE,KAAA,SAAAC,GACA,IAAAC,EAAAJ,EAAAK,QACAH,EAAAI,MAAAN,EAAAO,YAEAH,GAAAA,GAAAI,KAAAH,WAIAhB,EAEA,GACAF,KAEAsB,KAAAT,IAQA,SAAAU,EAAAV,GACA,IAAA,IAAAA,EAAAW,wBAAA,CAGAX,EAAAW,yBAAA,EAEA,IAAAC,EAAAC,EAAAC,KAAA,YACAC,EAAAH,EAAAG,kBACAC,EAAAJ,EAAAI,eAEAhB,EAAAiB,aAAA,WACA,IAAAC,EAAAV,KAAAW,SAAA,GAAAC,aAAAC,SAAAC,gBAAAC,aAGAf,KAAAW,SAAA1B,KACA+B,aAAAT,GAAAG,EAAAF,EAAA,GACAS,aAAAV,IAAAG,EAAAF,EAAA,MAEAP,KAAAT,IASA,SAAA0B,EAAA1B,GACA,IAAA,IAAAA,EAAA2B,oBAAA,CAGA3B,EAAA2B,qBAAA,EAEA,IAAAC,EAAA5B,EAAA4B,SAEA5B,EAAA4B,SAAA,WACAA,EAAAtB,MAAAN,EAAAO,WACApB,MAUA,SAAA0C,EAAA7B,GACA,IAAA8B,EAAA5C,EAAA6C,GAEAC,EAAAhC,EAAAgC,aACAhC,EAAAgC,aAAA,WACAA,EAAA1B,MAAAN,EAAAO,WAEAP,EAAAe,mBACAe,EAAArC,IAAA,gBAAAO,EAAAiC,MAAAxC,IAAA,mBAIA,IAAAyC,EAAAlC,EAAAkC,eACAlC,EAAAkC,eAAA,WACAA,EAAA5B,MAAAN,EAAAO,WAEAuB,EAAArC,IAAA,gBAAA,KASA,SAAA0C,EAAAtC,GACA,IAAAG,EAAAH,EAAAiB,KAAA,YAEAf,EAAAC,GAEA,GAAAX,EACAwC,EAAA7B,GAEAX,EAAA,IACAO,EAAAC,GACAa,EAAAV,GACA0B,EAAA1B,GAEAA,EAAAgC,aAAA,aACAhC,EAAAkC,eAAA,WACA7C,EAAA,GACAW,EAAAiC,MAAAzC,SAAA,gBAgBA,SAAA4C,EAAAjC,GACA,IAAAA,IAAAA,EAAAkC,qBAAA,CAIA,IAAAxC,EAAAX,EAAAiB,EAAAmC,QAEA,YAAAzC,EAAAiB,KAAA,gBAIAzB,IAEAwB,GAAA,GAAAxB,IACAwB,EAAAhB,GAGAsC,EAAAtC,KAOA,SAAA0C,IACArD,EAAAmC,UAAAmB,GAAA,2BAAAJ,GAvMA,IAAA1C,EAAA,KACAC,EAAA,GACAG,EAAA,GACAiC,EAAA,oCAEA1C,EAAA,EACAwB,EAAA,KAgNA,OAHA0B,KAIAE,QAVA,WACAvD,EAAAmC,UAAAqB,IAAA,2BAAAN,IAUAG,OAAAA,GAzNA,CA2NAI","file":"bootstrap-multimodal.min.js","sourcesContent":["/*\n * Bootstrap multi modal support.\n * Comes with loads of monkey patching.\n *\n * https://github.com/aleho/bootstrap-multimodal\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n *\n * Copyright: Alexander Hofbauer, <alex@derhofbauer.at>\n *\n * (Originally based on https://github.com/jhaygt/bootstrap-multimodal by jhaygt.)\n *\n */\nBootstrapMultimodal = (function ($) {\n    var BASE_ZINDEX       = 1040;\n    var ZINDEX_MULTIPLIER = 20;\n    var ZINDEX_MODAL      = 10;\n    var NAVBAR_SELECTOR   = '.apply-modal-open-padding .navbar';\n\n    var modalsCount = 0;\n    var $firstModal = null;\n\n\n    /**\n     * Hides any extra backdrops created by bootstrap and arranges the first one to always be below the top modal.\n     */\n    function adjustBackdrops() {\n        var modalIndex     = modalsCount - 1;\n        var $firstBackdrop = $('.modal-backdrop:first');\n\n        $('.modal-backdrop').not(':first').addClass('hidden');\n\n        if (modalIndex == 0) {\n            $firstBackdrop.css('z-index', '');\n        } else {\n            $firstBackdrop.css('z-index', BASE_ZINDEX + (modalIndex * ZINDEX_MULTIPLIER));\n        }\n    }\n\n    /**\n     * Moves a modal to the correct z-index position.\n     *\n     * @param $modal\n     */\n    function adjustModal($modal) {\n        var modalIndex = modalsCount - 1;\n\n        $modal.css('z-index', BASE_ZINDEX + (modalIndex * ZINDEX_MULTIPLIER) + ZINDEX_MODAL);\n    }\n\n    /**\n     * Monkey patches modal's hide for resetting of counts and body adjustments.\n     *\n     * @param {Object} modal\n     */\n    function patchModalHide(modal) {\n        if (modal.__isHidePatched === true) {\n            return;\n        }\n        modal.__isHidePatched = true;\n\n        var hide = modal.hide;\n\n        modal.hide = function (event) {\n            var wasShown = modal.isShown;\n            hide.apply(modal, arguments);\n\n            if (!wasShown || (wasShown && this.isShown)) {\n                return;\n            }\n\n            modalsCount--;\n\n            if (modalsCount > 0) {\n                adjustBackdrops();\n            }\n        }.bind(modal);\n    }\n\n    /**\n     * Monkey patches modal's adjustDialog for resetting of counts and body adjustments.\n     *\n     * @param {Object} modal\n     */\n    function patchModalAdjustDialog(modal) {\n        if (modal.__isAdjustDialogPatched === true) {\n            return;\n        }\n        modal.__isAdjustDialogPatched = true;\n\n        var firstModal         = $firstModal.data('bs.modal');\n        var bodyIsOverflowing  = firstModal.bodyIsOverflowing;\n        var scrollbarWidth     = firstModal.scrollbarWidth;\n\n        modal.adjustDialog = function () {\n            var modalIsOverflowing = this.$element[0].scrollHeight > document.documentElement.clientHeight;\n\n            // make sure paddings are set correctly according to first modal's determination of paddings\n            this.$element.css({\n                paddingLeft:  !bodyIsOverflowing && modalIsOverflowing ? scrollbarWidth : '',\n                paddingRight: bodyIsOverflowing && !modalIsOverflowing ? scrollbarWidth : ''\n            });\n        }.bind(modal);\n    }\n\n    /**\n     * Monkey patches modal's backdrop for positional adjustments.\n     * Only executed for stacked modals.\n     *\n     * @param {Object} modal\n     */\n    function patchModalBackdrop(modal) {\n        if (modal.__isBackdropPatched === true) {\n            return;\n        }\n        modal.__isBackdropPatched = true;\n\n        var backdrop = modal.backdrop;\n\n        modal.backdrop = function () {\n            backdrop.apply(modal, arguments);\n            adjustBackdrops();\n        };\n    }\n\n    /**\n     * Patches a modal's padding setting for hidden body scrollbars.\n     * Only executed for stacked modals.\n     *\n     * @param modal\n     */\n    function patchModalSetScrollbar(modal) {\n        var $navbars = $(NAVBAR_SELECTOR);\n\n        var setScrollbar = modal.setScrollbar;\n        modal.setScrollbar = function () {\n            setScrollbar.apply(modal, arguments);\n\n            if (modal.bodyIsOverflowing) {\n                $navbars.css('padding-right', modal.$body.css('padding-right'));\n            }\n        };\n\n        var resetScrollbar = modal.resetScrollbar;\n        modal.resetScrollbar = function () {\n            resetScrollbar.apply(modal, arguments);\n\n            $navbars.css('padding-right', '');\n        };\n    }\n\n    /**\n     * Patches a modal's methods.\n     *\n     * @param $modal\n     */\n    function patchModal($modal) {\n        var modal = $modal.data('bs.modal');\n\n        patchModalHide(modal);\n\n        if (modalsCount == 1) {\n            patchModalSetScrollbar(modal);\n\n        } else if (modalsCount > 1) {\n            adjustModal($modal);\n            patchModalAdjustDialog(modal);\n            patchModalBackdrop(modal);\n\n            modal.setScrollbar   = function () { /* noop */ };\n            modal.resetScrollbar = function () {\n                if (modalsCount > 0) {\n                    modal.$body.addClass('modal-open');\n                }\n            };\n        }\n    }\n\n\n    /**\n     * Bootstrap triggers the show event at the beginning of the show function and before\n     * the modal backdrop element has been created.\n     *\n     * The additional event listener allows bootstrap to complete show, after which the modal backdrop will have been\n     * created and appended to the DOM.\n     *\n     * @param event\n     */\n    function onShow(event) {\n        if (event && event.isDefaultPrevented()) {\n            return;\n        }\n\n        var $modal = $(event.target);\n\n        if ($modal.data('multimodal') == 'disabled') {\n            return;\n        }\n\n        modalsCount++;\n\n        if (!$firstModal || modalsCount == 1) {\n            $firstModal = $modal;\n        }\n\n        patchModal($modal);\n    }\n\n\n    /**\n     * Enables multimodal patching.\n     */\n    function enable() {\n        $(document).on('show.bs.modal.multimodal', onShow);\n    }\n\n    /**\n     * Disables multimodal patching.\n     */\n    function disable() {\n        $(document).off('show.bs.modal.multimodal', onShow);\n    }\n\n\n    // enable by default\n    enable();\n\n\n    return {\n        disable: disable,\n        enable:  enable\n    };\n}(jQuery));\n"]}